\chapter{Literature Study}

This chapter provides a brief overview of the related work being done in the research community. Performance evaluation of \gls{ble}, 802.15.4 and their comparison are presented in section \ref{4ble}, \ref{4802} and \ref{4ble802} respectively.

\section{Evaluating the Performance of \gls{ble}} \label{4ble}
In a paper \cite{Gomez2012} providing an overview and evaluation of \gls{ble}, its various parameters such as energy consumption, latency, maximum piconet size and throughput have been evaluated. Theoretical calculations were done to predict the lifetime of a \gls{ble} slave device running of a 230 mAh coin cell battery for different values of connection interval and slave latency. The average current consumption of a TI CC2540 \gls{ble} platform was plotted for the entire range of connection interval keeping the slave latency as zero. The estimate of the lifetime was also done with respect to various \gls{ber}. A latency measurement also has been done in this paper, where it measures the time to send a notification packet and receive the `no more data' acknowledgment packet from the receiver in the link-layer. This interaction happening in the same connection event was measured as 676.7 \si{\micro \second}.

The same experimental setup \cite{Gomez2012} shows the maximum throughput between two CC2540 devices as 58.48 kbps considering a payload of 20 bytes. This is attributed to the fact that in each connection event with an interval of 7.5 ms four packets are not transmitted as in an ideal case. An analytical model of the throughput \cite{Gomez2011} has been developed for different \gls{ber} and connection interval. Simulation results validate this model developed. This model show that the maximum throughput in case the \gls{ber} is zero is 236.7 kbps, independent of the connection interval. An assumption made in this paper is that the master and slave device do not have any limit on the number of packets communicated in a connection interval. 

The energy consumption for an advertiser and scanner is modeled for the activity of the scanner discovering the advertiser \cite{liu2012energy}. The current consumption for each phase of advertisement and scanning is measured. Using this information a model of the energy consumption is developed taking into account the advertising and scanning interval. The model developed is compared with experiments and validated. 

The current consumption in different phases of operation, namely waking up, pre-processing, the transmission-reception cycles and the post-processing is measured \cite{Mackensen2012} to estimate the lifetime. A recent journal article \cite{Kindt2014} develops a precise model of the energy consumption of \gls{ble} devices. A payload (20 bytes) throughput of 102 kbps is achieved in this paper consistent with the manufacturer's claims \cite{MikkoSavolainen}. The model developed is  unique in the sense that it is the first one which encompasses all the modes of operation, all the relevant parameters and their possible values. The model is based upon the actual measured duration of various parameters and measured current in various phases of operation. This leads to a model which at most has 6\% variation from actual measurement. The code base for the model is available so that it can be ported to the system being evaluated.

Based on the model developed and evaluated, a set of guidelines are provided for developers of \gls{ble} system to reduce energy consumption \cite{Kindt2014}. In the unconnected mode, the scanner is recommended to be continuously scanning in case the advertisers is expected to be found soon. In case of where a lot of time is spent scanning idly, the parameters of advertising interval and duty cycle of the scanner can be tweaked to minimize both the energy consumption and latency of discovery. In the connected mode, the recommendation is to completely fill the payload as possible and communicate as much data as possible within a connection event. In both modes, it was noted that although reducing the transmission power appropriate to the the distance transmitted helped in reducing energy consumption, it was not as significant as the other factors.

\section{Evaluating the Performance of 802.15.4} \label{4802}

As mentioned in \todo{background}, this thesis will not use the standard 802.15.4 standard MAC layer, only the 802.15.4 physical layer. The MAC layers used with 802.15.4 physical layer are ContikiMAC and Null-RDC. This is because of the amount of activity in the research community with these layers as compared to the standard 802.15.4 MAC layer. This section will briefly explain the research done to evaluate the performance of ContikiMAC and Null-RDC. 

ContikiMAC is detailed in a technical report \cite{Dunkels2011} which also evaluates its performance with few benchmarks.

\cite{Dunkels2011}
Adam Dunkels. “The ContikiMAC Radio Duty Cycling Protocol”. In: (Dec. 2011).

\cite{Michel2014} Mathieu Michel and Bruno Quoitin. “Technical Report : ContikiMAC vs X-MAC performance analysis”. In: arXiv preprint arXiv:1404.3589 (Apr. 2014). arXiv: 1404.3589.

\cite{Uwase2014} M.-P. Uwase, M. Bezunartea, T.L. Nguyen, et al. “Experimental evaluation of message latency and power usage in WSNs”. In: 2014 IEEE International Black Sea Conference on Communications and Networking (BlackSeaCom). IEEE, May 2014,
pp. 69–72.

\section{Comparison of \gls{ble} and 802.15.4} \label{4ble802}

\gls{ble} is relatively new protocol compared to 802.15.4, due to which there are few studies conducted comparing the two low power wireless protocols. The energy consumption of \gls{ble} and 802.15.4 was compared in terms of the amount of payload can be communicated per Joule of energy i.e. the energy utility measured with unit kByte/J \cite{Siekkinen2012}. It was found that for \gls{ble} the energy utility was independent of the throughput and depended on the number of packets communicated per connection event. The energy utility varied from around 325 to 525 kByte/J when the packets per connection event rose from one to four respectively. In case of 802.15.4, the energy utility did depend on the throughput. Until 1 kBps the energy utility increased with respect to the throughput, then plateaued at 300 kByte/J. 

In the same paper \cite{Siekkinen2012} the energy utility of both \gls{ble} and 802.15.4 is measured when transmitting a payload over the link layer and when transmitting payload with \gls{6lowpan} with the application payload (up to 150 Bytes) as a factor. Both increase in a step-wise manner because of the maximum payload capacity in both protocols with \gls{ble} having larger number of step because of the lesser payload capacity of 27 byte at the link layer. The overheads of the different \gls{6lowpan} frames can also be seen in both the protocols. 

The effect of WiFi interference on the reception of packets is also considered for the two protocols \cite{Siekkinen2012}. It should be noted that the test build did not support \gls{afh} to avoid interference, so the authors tested only the non-connected mode for \gls{ble}. In that case, up to 1 m the interference resulted in only 5 to 20\% of the packets being received successfully, depending on the overlap of the interfering WiFi channel over the advertising \gls{ble} channel. 1.5 m and above the WiFi interference affected the communication little. In case of 802.15.4, the WiFi interference closer than 0.5 m resulted in only 35\% of the packets being communicated. At a distance of 1 m and above, the interference had negligible effect on the packets being communicated.

Another journal article \cite{Mikhaylov2013} compares \gls{ble}, 802.15.4 and another wireless protocol SimpliciTI over various criteria of throughput (theoretical and experimental), minimum turnaround time, energy consumption of the transceivers and the memory resources required for the stack of these protocols. Minimum turnaround time here is the time required for requesting data and receiving it. SimpliciTI is an flexible open-source low-power proprietary radio protocol developed by TI for their wireless products, compatible with 802.15.4 transceivers. Similar to \cite{Gomez2011}, a the calculation of the maximum throughput for \gls{ble} provided a value greater than 300 kbps, now at the link layer. Since SimpliciTI does not have rigid specification, its parameters can be tweaked for the maximum throughput to be calculated as 350 kbps. 802.15.4's maximum throughput was calculated to be between 150 and 200 kbps. The experimental evaluation of the throughput for SimpliciTI and 802.15.4 peaked at about 160 kbps and 145 kbps respectively accounting to the pre-processing operations and CCA inc case of 802.15.4. In case of \gls{ble}, the stack allowed different number of packets per connection event based on the link layer payload size. This resulted in a the throughput increasing irregularly with the payload, peaking at 122.6 kbps.

The minimum turnaround time measured for \gls{ble} was estimated to be below 1 ms since the reply was expected after the \gls{ifs} in the same connection event. Experiments show that this is actually 7.6 ms. This is consistent with the minimum connection interval of 7.5 ms after which the reply is received in the next connection event. The minimum turnaround time was estimated as 1.92 to 10.08 ms and 0.7 to 5 ms for 802.15.4 and SimpliciTI respectively based on the mode of operation. The measured value was between 1.5 and 3 ms higher than the estimated value for both 802.15.4 and SimpliciTI. The energy consumption for the three protocols were measure per transmission and per byte transmitted. It was found that \gls{ble} transceiver consumed 2 to 7 times lower energy than the other two transceivers depending on the mode of operation.

One more article compare the energy consumption of \gls{ble}, ZigBee and ANT wireless protocols for a low duty cycle application sending few bytes of data periodically  \cite{Dementyev2013}. Standardized in 2003, ZigBee is a wireless, low cost, low power, mesh networking standard \cite{ZigbeeAkl} typically used in home automation, industrial control, wireless sensor networks and the like. ZigBee uses 802.15.4 for its physical and \gls{mac} layer. ANT is another 2.4 GHz \gls{ism} based wireless sensor network protocol supporting many network architectures as point to point, broadcasting and mesh. Its typical applications are in fitness and sports \gls{pan}. In the article \cite{Dementyev2013} the test case involves devices based on these three protocols initiating connection and transferring 8 bytes of data and then disconnecting periodically at an interval ranging from 5 to 120 seconds. From this test case, the authors found that the average current consumed by \gls{ble} was the lowest, followed by ZigBee and then ANT. The paper finds that on an average \gls{ble} takes the longest to connect at 1150 ms, followed by ANT at 930 ms and Zigbee being the fastest at 250 ms. The \gls{ble} test setup's parameters such as advertising interval, scanning interval and scanning duty cycle which effect the time for BLE connection to be established are not mentioned in this paper.

